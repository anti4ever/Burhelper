<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Расчеты в бурении</title>
    <!-- Bootstrap CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-theme.css" rel="stylesheet">
    <!-- My styles -->
    <link href="style/style.css" rel="stylesheet">
    <!-- Подключение Animate.css -->
    <link href="style/animate.css" rel="stylesheet">
    <!-- jQuery JS -->
    <script src="scripts/jquery-3.2.1.js"></script>
    <!-- Bootstrap JS -->
    <script src="bootstrap/js/bootstrap.js"></script>
    <!-- Работа с числами с плавающей точкой -->
    <script src="scripts/big.min.js"></script>
    <!-- Подключение Vue.js -->
    <script src="scripts/vue.js"></script>
    <!-- Подключение иконки -->
    <link rel="shortcut icon" href="favicon.png" type="image/png">
</head>

<body>
    <br>
    <div class="container" id="mainapp">
        <!--Изменение максимальной ширины на 450px (стандартно 750px) через класс "container"-->
        <div class="well well-sm text-center">
            <img src="favicon.png" class="mainimg"><b><a href="#">Burhelper.ru</a></b>
            <h1>Расчеты в бурении</h1>
            <small>Мини утилиты на каждый день.</small>
            <br>
        </div>
        <div class="well well-sm" v-show="seenmainbtn">
           <button v-on:click="backonmain" class="btn btn-primary btn-block">На главную страницу</button>
        </div>
        

        <transition
        name="fade"
        enter-active-class="animated fadeIn"
        >
        <div v-show="seenmodulesbtn" class="buttoncase well well-sm text-center">
            <button v-on:click="getmodule(value.dir)" v-for="value in modulesinfo" :dir="value.dir" :title="value.description" class="btn btn-primary btn-block">{{value.name}}</button>

        </div>
        </transition>

        <transition
        name="fade"
        enter-active-class="animated fadeIn"
        >
                <div v-show="seenmodulecase" class="modulecase well well-sm"></div>
        </transition>  
        


        <div class="well well-sm text-center">
            <p><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true" style="color: red;"></span> Нашли ошибку:
                <a href="mailto:burhelper@mail.ru">burhelper@mail.ru</a></p>
            <p><span class="glyphicon glyphicon-modal-window" aria-hidden="true"></span> Есть предложения по новым
                <br>модулям: <a href="mailto:burhelper@mail.ru">burhelper@mail.ru</a></p>
            <p><small>Cоздано с помощью <a href="http://getbootstrap.com">Bootstrap</a> , <a href="http://jquery.com/">jQuerty</a> и <a href="https://github.com/MikeMcl/big.js">Big.js.</a></small></p>
        </div>
    </div>
    <!-- Создание приложения на Vue.js -->
    <script>
        // Создание основного экземпляра (главного приложения) Vue c именем "vm" с привязкой к id "maimapp"
        var vm = new Vue({
            el: "#mainapp",
            data: {
                modulesinfo: Object,
                dir: String,
                moduletrigger: true,
                seenmainbtn: false,
                seenmodulesbtn: true,
                seenmodulecase: false
            },
            methods: {
                getmodule: function (dir) {
                    if (this.moduletrigger == true) {
                        $(".modulecase").load(dir);
                        //console.log(dir);//Это работает!
                        this.moduletrigger = false;
                        this.seenmodulesbtn = false;
                        this.seenmainbtn = true;
                        this.seenmodulecase = true;
                        //console.log(this.moduletrigger);
                        //console.log("ветка true");
                    } else {
                        //module.$destroy();
                        $(".modulecase").load(dir);
                        this.seenmodulesbtn = false;
                        this.seenmainbtn = true;
                        this.seenmodulecase = true;
                        //console.log(dir);//Это работает!
                        //console.log(this.moduletrigger);
                        //console.log("ветка else");
                    }

                },
                backonmain: function () {
                    this.seenmodulesbtn = true;
                    this.seenmainbtn = false;
                    this.seenmodulecase = false;
                }
            },
            mounted: function () {
                $.getJSON("modules.json", function (data) { // Загрузка modules.json
                    vm.modulesinfo = data;
                    //console.log(vm.modulesinfo);
                })
            }
        })
    </script>
</body>

</html>